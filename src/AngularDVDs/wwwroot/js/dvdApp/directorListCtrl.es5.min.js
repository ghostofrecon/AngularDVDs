"use strict";(function(){function t(){return{templateUrl:"templates/fullDirectorListModal",restrict:"AE",replace:!0,scope:!0,link:function(){}}}function i(){return{templateUrl:"templates/AddDirectorModal",restrict:"AE",replace:!0,scope:!0,link:function(){}}}function r(){return function(n,t){return t=+t,n.slice(t)}}function n(n,t,i,r){function u(){n.startSpin();t.get("api/directors").then(function(t){n.DirectorsNameList=t.data.sort(function(n,t){return n.DIRECTOR_ADDMOD_Datetime<t.DIRECTOR_ADDMOD_Datetime?1:n.DIRECTOR_ADDMOD_Datetime>t.DIRECTOR_ADDMOD_Datetime?-1:0})});n.stopSpin()}n.title="directorListCtrl";n.DirectorsNameList=[];n.dirToAdd="";n.directors=[];n.start=0;n.currentPage=0;n.reactivate=function(){n.startSpin();n.DirectorsNameList=[];setTimeout(function(){t.get("api/directors").then(function(t){n.DirectorsNameList=t.data.sort(function(n,t){return n.DIRECTOR_ADDMOD_Datetime<t.DIRECTOR_ADDMOD_Datetime?1:n.DIRECTOR_ADDMOD_Datetime>t.DIRECTOR_ADDMOD_Datetime?-1:0})})},500);n.stopSpin();i.showToast("info",3e3,"Directors refreshed")};n.numberOfPages=function(){return Math.ceil(n.DirectorsNameList/10)};n.startSpin=function(){n.spinneractive||r.spin("spinner-1")};n.stopSpin=function(){n.spinneractive&&r.stop("spinner-1")};n.addDirector=function(r){if(n.DirectorsNameList)for(var f=0;f<n.DirectorsNameList.length;f++)if(n.DirectorsNameList[f].DIRECTOR_NAME===r){$("#newDirInput").popover({placement:"top"}).popover("show");i.showToast("error",3e3,r+" alreay exists in database");return}t.post("api/directors",{DIRECTOR_NAME:r}).then(function(){i.showToast("success",3e3,r+" added to database");n.dirToAdd="";u();$("#addDirectorModal").modal("hide")},function(){i.showToast("error",3e3,r+" could not be added to database")})};u();n.dirOrderColumn="DIRECTOR_NAME";n.orderList=function(t){n.dirOrderColumn=n.dirOrderColumn===t?"-"+t:t}}angular.module("dvdApp").directive("addDirectorModal",i).directive("fullDirectorListModal",t).filter("startFrom",r).controller("directorListCtrl",n);n.$inject=["$scope","$http","toastFactory","usSpinnerService"]})();