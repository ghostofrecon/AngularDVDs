"use strict";(function(){function t(){return{templateUrl:"templates/fullDirectorListModal",restrict:"AE",replace:!0,scope:!0,link:function(){}}}function i(){return{templateUrl:"templates/AddDirectorModal",restrict:"AE",replace:!0,scope:!0,link:function(){}}}function r(){return function(n,t){return t=+t,n.slice(t)}}function n(n,t,i){function r(){t.get("api/directors").then(function(t){n.DirectorsNameList=t.data.sort(function(n,t){return n.DIRECTOR_ADDMOD_Datetime<t.DIRECTOR_ADDMOD_Datetime?1:n.DIRECTOR_ADDMOD_Datetime>t.DIRECTOR_ADDMOD_Datetime?-1:0})})}n.title="directorListCtrl";n.DirectorsNameList=[];n.dirToAdd="";n.directors=[];n.start=0;n.currentPage=0;n.reactivate=function(){n.DirectorsNameList=[];setTimeout(function(){t.get("api/directors").then(function(t){n.DirectorsNameList=t.data.sort(function(n,t){return n.DIRECTOR_ADDMOD_Datetime<t.DIRECTOR_ADDMOD_Datetime?1:n.DIRECTOR_ADDMOD_Datetime>t.DIRECTOR_ADDMOD_Datetime?-1:0})})},500);i.showToast("info",3e3,"Directors refreshed")};n.numberOfPages=function(){return Math.ceil(n.DirectorsNameList/10)};n.addDirector=function(u){if(n.DirectorsNameList)for(var f=0;f<n.DirectorsNameList.length;f++)if(n.DirectorsNameList[f].DIRECTOR_NAME===u){$("#newDirInput").popover({placement:"top"}).popover("show");i.showToast("error",3e3,u+" alreay exists in database");return}t.post("api/directors",{DIRECTOR_NAME:u}).then(function(){i.showToast("success",3e3,u+" added to database");n.dirToAdd="";r();$("#addDirectorModal").modal("hide")},function(){i.showToast("error",3e3,u+" could not be added to database")})};r();n.dirOrderColumn="DIRECTOR_NAME";n.orderList=function(t){n.dirOrderColumn=n.dirOrderColumn===t?"-"+t:t}}angular.module("dvdApp").directive("addDirectorModal",i).directive("fullDirectorListModal",t).filter("startFrom",r).controller("directorListCtrl",n);n.$inject=["$scope","$http","toastFactory"]})();