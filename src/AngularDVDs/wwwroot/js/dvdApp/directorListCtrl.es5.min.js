"use strict";(function(){function t(){return{templateUrl:"templates/fullDirectorListModal",restrict:"AE",replace:!0,scope:!0,link:function(){}}}function i(){return{templateUrl:"templates/AddDirectorModal",restrict:"AE",replace:!0,scope:!0,link:function(){}}}function r(){return function(n,t){return t=+t,n.slice(t)}}function n(n,t,i,r){function u(){r.spin("dirSpinner")}function f(){r.stop("dirSpinner")}function e(n){return n.sort(function(n,t){return n.DIRECTOR_ADDMOD_Datetime<t.DIRECTOR_ADDMOD_Datetime?1:n.DIRECTOR_ADDMOD_Datetime>t.DIRECTOR_ADDMOD_Datetime?-1:0})}function o(){u();t.get("api/directors").then(function(t){n.DirectorsNameList=e(t.data);setTimeout(function(){f()},300)})}n.title="directorListCtrl";n.DirectorsNameList=[];n.dirToAdd="";n.directors=[];n.start=0;n.currentPage=0;n.reactivate=function(){u();n.DirectorsNameList=[];setTimeout(function(){t.get("api/directors").then(function(t){n.DirectorsNameList=e(t.data);setTimeout(function(){f()},300)})},500);i.showToast("info",3e3,"Directors refreshed")};n.dirIsEmpty=function(){return n.DirectorsNameList.length===0};n.numberOfPages=function(){return Math.ceil(n.DirectorsNameList/10)};n.addDirector=function(r){if(n.DirectorsNameList)for(var u=0;u<n.DirectorsNameList.length;u++)if(n.DirectorsNameList[u].DIRECTOR_NAME===r){$("#newDirInput").popover({placement:"top"}).popover("show");i.showToast("error",3e3,r+" alreay exists in database");return}t.post("api/directors",{DIRECTOR_NAME:r}).then(function(){i.showToast("success",3e3,r+" added to database");n.dirToAdd="";o();$("#addDirectorModal").modal("hide")},function(){i.showToast("error",3e3,r+" could not be added to database")})};o();n.dirOrderColumn="DIRECTOR_NAME";n.orderList=function(t){n.dirOrderColumn=n.dirOrderColumn===t?"-"+t:t}}angular.module("dvdApp").directive("addDirectorModal",i).directive("fullDirectorListModal",t).filter("startFrom",r).controller("directorListCtrl",n);n.$inject=["$scope","$http","toastFactory","usSpinnerService"]})();